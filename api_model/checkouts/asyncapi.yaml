asyncapi: 2.0.0
id: apis:async:checkouts
info:
  title: Checkouts Async API
  version: '1.0'
servers:
  - url: demo.ecommerce.com/checkouts
    protocol: ws

channels:
  /checkouts/{checkoutId}/shipping_rates:
    subscribe:
      message:
        schemaFormat: application/raml+yaml
        payload:
          $ref: ./schema.yaml#/types/ShippingRateRead

  /checkouts/{checkoutId}/payments:
    subscribe:
      message:
        schemaFormat: application/raml+yaml
        payload:
          $ref: ./schema.yaml#/types/PaymentRead
    publish:
      message:
        schemaFormat: application/raml+yaml
        payload:
          $ref: ./schema.yaml#/types/PaymentWrite

  /checkouts/{checkoutId}/order:
    subscribe:
      message:
        schemaFormat: application/raml+yaml
        payload:
          $ref: ./schema.yaml#/types/Order                              
